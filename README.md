# MyHomeProject

## Описание:
IT-отдел крупного банка делает новую фичу для личного кабинета клиента. Это виджет, который показывает несколько последних успешных банковских операций клиента. 

## Статус разработки:
В разработке.

## Установка:
1.	Клонируйте репозиторий https://github.com/SeetanaMarata/MyHomeProject.git
2.	Установите зависимости

```pip install -r requirements.txt```

## Реализованный функционал:
Функция маскировки номера банковской карты 
get_mask_card_number
Функция маскировки номера банковского счета 
get_mask_account

Функция mask_account_card, которая умеет обрабатывать информацию как о картах, так и о счетах

Функция get_date, которая принимает на вход строку с датой в формате 
"2024-03-11T02:26:18.671407" и возвращает строку с датой в формате 
"ДД.ММ.ГГГГ"("11.03.2024").

Функция sort_by_date, которая принимает список словарей и необязательный параметр, задающий порядок сортировки (по умолчанию — убывание). Функция должна возвращать новый список, отсортированный по дате (date).

# Тестирование:
Написаны тесты для существующих функций проекта
## Модуль masks
### Функция get_mask_card_number:
1. Тестирование правильности маскирования номера карты.
2. Проверена работа функции на различных входных форматах номеров карт, включая граничные случаи и нестандартные длины номеров.
3. Проверено, что функция корректно обрабатывает входные строки, где отсутствует номер карты.

### Функция get_mask_account:
1. Протестирована правильность маскирования номера счета.
2. Проверена работа функции с различными форматами и длинами номеров счетов.
3. Проверено, что функция корректно обрабатывает входные данные, где номер счета меньше ожидаемой длины.

## Модуль widget
### Функция mask_account_card:
1. Созданы тесты для проверки, что функция корректно распознает и применяет нужный тип маскировки в зависимости от типа входных данных (карта или счет).
2. Созданы параметризованные тесты с разными типами карт и счетов для проверки универсальности функции.
3. Тестируются функции на обработку некорректных входных данных и проверяются ее устойчивости к ошибкам.

### Функция get_date:
1. Тестируются правильности преобразования даты.
2. Осуществлена проверка работы функции на различных входных форматах даты, включая граничные случаи и нестандартные строки с датами.
3. Проверяется, что функция корректно обрабатывает входные строки, где отсутствует дата.

## Модуль processing
### Функция filter_by_state:
1. Произведено тестирование фильтрации списка словарей по заданному статусу state.
2. Проверена работа функции при отсутствии словарей с указанным статусом state в списке.
3. Есть параметризация тестов для различных возможных значений статуса state.

### Функция sort_by_date:
1. Протестирована сортировка списка словарей по датам в порядке убывания и возрастания.
2. Проверена корректность сортировки при одинаковых датах.
3. Включены тесты на работу функции с некорректными или нестандартными форматами дат.

# Примеры использования:
## Модуль generators
### 1. Фильтрация транзакций по валюте
from generators import filter_by_currency

usd_transactions = filter_by_currency(transactions, "USD")
print(next(usd_transactions))  # Первая USD-транзакция
print(next(usd_transactions))  # Вторая USD-транзакция
### 2. Получение описаний транзакций
from generators import transaction_descriptions

descriptions = transaction_descriptions(transactions)
for _ in range(3):
    print(next(descriptions))
### 3. Генерация номеров карт
from generators import card_number_generator

for card_number in card_number_generator(1, 5):
    print(card_number)
##### 0000 0000 0000 0001
##### 0000 0000 0000 0002
##### ... до 0000 0000 0000 0005

## Ключевые особенности:
Работа с большими объемами данных через генераторы

Эффективное использование памяти

Простота интеграции в существующие проекты

### Пояснения:
1. **filter_by_currency**:
   - Проверяет вложенную структуру транзакции (`operationAmount.currency.code`)
   - Возвращает только транзакции с совпадающей валютой
   - Корректно обрабатывает пустые списки и отсутствующие данные

2. **transaction_descriptions**:
   - Извлекает поле "description" из каждой транзакции
   - Работает с любым количеством транзакций

3. **card_number_generator**:
   - Форматирует числа в 16-значные строки с ведущими нулями
   - Разбивает на группы по 4 цифры
   - Поддерживает весь диапазон (1-9999999999999999)

### Тесты обеспечивают:
- Покрытие всех сценариев использования
- Проверку граничных условий
- Обработку пустых входных данных
- Параметризованные тесты для генератора карт

## Декоратор log

### Обзор
В проекте реализован декоратор log, который обеспечивает автоматическое логирование выполнения функций. Этот инструмент позволяет отслеживать:

Успешные выполнения функций

Ошибки в процессе работы

Входные параметры функций

Временные метки выполнения

#### Установка и использование
Требования
Python 3.7+

Установка зависимостей
pip install pytest pytest-cov
Использование декоратора
python
from decorators import log

### Логирование в консоль
@log()
def my_function(a, b):
    return a + b

### Логирование в файл
@log(filename="app.log")
def another_function(x, y):
    return x / y
## Параметры декоратора
Путь к файлу для записи логов. Если не указан, логи выводятся в консоль
Формат логов
При успешном выполнении
text
<имя_функции> ok

#### Примеры использования
##### Логирование в консоль
python
@log()
def add(a: int, b: int) -> int:
    return a + b

add(2, 3)  # Вывод в консоль: "add ok"
##### Логирование в файл
python
@log(filename="operations.log")
def divide(a: int, b: int) -> float:
    return a / b

divide(10, 2)  # Запись в файл: "divide ok"
divide(5, 0)   # Запись в файл: "divide error: ZeroDivisionError. Inputs: (5, 0), {}"
##### Логирование функций с различными аргументами
python
@log()
def process_data(name: str, value: int, options: dict = None) -> str:
    if value < 0:
        raise ValueError("Negative value not allowed")
    return f"Processed {name}"

process_data("test", 10)  # Вывод: "process_data ok"
process_data("error", -5) # Вывод: "process_data error: ValueError. Inputs: ('error', -5), {}"
## Тестирование
Для проверки работы декоратора реализованы тесты с использованием pytest:

pytest tests/test_decorators.py
Проверка покрытия кода

pytest --cov=decorators --cov-report=term-missing tests/test_decorators.py

### Тесты покрывают следующие сценарии:

Логирование успешного выполнения в консоль

Логирование ошибок в консоль

Логирование успешного выполнения в файл

Логирование ошибок в файл

Корректность формата сообщений

Обработка различных типов аргументов

Многократные вызовы функции

Юникод-символы в выводе

Производительность декоратора

Параметризованные тесты с различными входными данными

Результаты тестирования
100% покрытие кода декоратора

35+ тестовых сценариев

Проверка работы в различных окружениях (Windows/Linux/macOS)

Поддержка Python 3.7+

Преимущества реализации
Гибкость: выбор между выводом в консоль или файл

Информативность: детальная информация об ошибках и аргументах

Надежность: сохранение оригинального поведения декорируемых функций

Типизация: полная аннотация типов для надежной работы в IDE

Кроссплатформенность: поддержка различных ОС и версий Python

Производительность: минимальные накладные расходы (< 0.001 мс на вызов)

Юнит-тестирование: полное покрытие тестами всех сценариев использования

Дальнейшее развитие
Добавление временных меток в логи

Реализация уровней логирования (DEBUG, INFO, ERROR)

Поддержка ротации лог-файлов

Интеграция со стандартным модулем logging Python

Добавление контекстных менеджеров для логирования

Поддержка асинхронных функций

#### Декоратор log является мощным инструментом для отладки и мониторинга работы приложения, обеспечивая прозрачность выполнения операций и быструю диагностику проблем. Реализация соответствует лучшим практикам Python и имеет 100% покрытие тестами, что гарантирует надежность работы в production-средах.